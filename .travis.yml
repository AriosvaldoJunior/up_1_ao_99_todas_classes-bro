language: c

matrix:
  include:
    - os: linux
      env: NAME="script build"
      sudo: required
      dist: trusty
      services: docker
      addons:
        apt:
          packages:
            - zip 
            - curl
      script: "./.travis/build.sh"

before_script:
      - curl https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add -
      - curl https://packages.microsoft.com/config/ubuntu/14.04/prod.list | sudo tee /etc/apt/sources.list.d/microsoft.list
      - sudo apt-get update
      - sudo apt-get install -y powershell
      - chmod +x ./.travis/build.sh

before_deploy:
      # Set up git user name and tag this commit
      - git config --local user.name "EventMacrosBR"
      - git config --local user.email "noreply@noreply.org"
      - git tag "$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)"
deploy:
  provider: releases
  api_key: 
     secure: "B4NLePsI/W07iUjKAnHptGJAbzFs/tNeuhXbQs/uNLAlPA95UlxQyJOKcaJ8muRQ7075ivGgEFdzxBnZtcvJLxipRyeiAVWuesVKJLl69z8YRMt5yINvlvI4C+Y/OcvV8bcbpoc2VmF1CbzX3tcSgI1v4CLu3BnvH5qaXUp37UM04EQoInqHBesY3CFwcVKFDBCNikbJvxPKz82ThlIU5/LaiJAhCPoEkQTX3r/nz5MXLRnQvlBkSdmp/kwakTpxlIstoijNUvaSsQunO/VVv/IpFJuT6LYYtginKLeCx+n1rneZvlrOpYqGTPjFuXnArVATDC4tjs61yGXuRTzopAnPGcIWV0neZST03MsfddWIMa7tZm1kVEv4FDBbWPtKhT2MVMih4bRLkB7VMxYTguaE4b7pi88Ulw/UO3oNIPGm8d4SZqwsUNuZfC5MoClU4/BlaFoWVvClfCsKUBGgnvI2MtmyFazWNUcAa8Rzetl6ERHQx3fw4mmQbMEDEvI5udCqRWtG8LO0xZGI8VLzGdgJqquVJM/+Phi4TntxJwbf7fvLYI+nuzDqpWcjJArV3njX/5ovraH9PqhywIL8O1Stj+tbqPA2++PuedXBKowgCDbJFmeQzpDoT+SM5mtSgT2RKlDA1J7F5QsZuEAGzldTwWQr4xWdbdMoyojPjlw="
  file: build.zip
  skip_cleanup: true